<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Admin Tools</title>
  <style>
    :root{ --bg:#f5f5f7; --card:#fff; --text:#111; --sub:#6b6b6f; --link:#007aff; --radius:18px; --shadow:0 14px 30px rgba(0,0,0,.06); --divider:rgba(0,0,0,.08); }
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif;-webkit-font-smoothing:antialiased;}
    .wrap{max-width:960px;margin:0 auto;padding:1.25rem 1.5rem 2.5rem;}
    .top{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;max-width:640px;}
    h1{margin:0;font-size:2.05rem;font-weight:750;letter-spacing:-.02em;}
    .back{margin-top:.35rem;font-weight:650;color:var(--link);text-decoration:none;font-size:1rem;}
    .sub{max-width:640px;margin:.5rem 0 0;color:var(--sub);font-size:.98rem;}
    .card{max-width:640px;margin-top:1rem;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;}
    .sec{padding:1rem 1.05rem;border-bottom:1px solid var(--divider);}
    .sec:last-child{border-bottom:none;}
    label{display:block;font-weight:800;margin:0 0 .5rem;}
    input{
      width:100%;box-sizing:border-box;border:1px solid rgba(0,0,0,.15);
      padding:.75rem .8rem;border-radius:12px;font-size:1rem;
      background:#fff;
    }
    .hint{margin:.55rem 0 0;color:var(--sub);font-size:.9rem;line-height:1.35;}
    .actions{margin-top:.9rem;display:flex;gap:.6rem;flex-wrap:wrap;}
    button{
      border:none;border-radius:12px;padding:.75rem .9rem;font-weight:800;font-size:.95rem;
      background:#111;color:#fff;
    }
    button.secondary{background:#e9e9ee;color:#111;}
    .ok{margin-top:.8rem;color:#0a7a2f;font-weight:800;display:none;}
    @media (max-width:600px){ .wrap{padding:1.1rem 1.2rem 2.1rem;} h1{font-size:1.9rem;} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>Admin Tools</h1>
        <p class="sub">Used only on Dad’s device.</p>
      </div>
      <a class="back" href="settings.html">Back</a>
    </div>

    <div class="card">
      <div class="sec">
        <label for="hook">Make webhook URL (regen daily message)</label>
        <input id="hook" type="url" placeholder="https://hook.us1.make.com/xxxxx" />
        <p class="hint">
          This is the URL the “G” button calls to regenerate the AI daily message for the currently selected date.
          Thursdays are excluded.
        </p>
        <div class="actions">
          <button id="saveBtn">Save</button>
          <button id="clearBtn" class="secondary">Clear</button>
        </div>
        <div id="ok" class="ok">Saved.</div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const KEY = "admin_regen_webhook";
      const input = document.getElementById("hook");
      const ok = document.getElementById("ok");

      input.value = localStorage.getItem(KEY) || "";

      document.getElementById("saveBtn").addEventListener("click", () => {
        const val = (input.value || "").trim();
        if (!val) { alert("Paste the Make webhook URL first."); return; }
        localStorage.setItem(KEY, val);
        ok.style.display = "block";
        setTimeout(() => (ok.style.display = "none"), 1200);
      });

      document.getElementById("clearBtn").addEventListener("click", () => {
        localStorage.removeItem(KEY);
        input.value = "";
        ok.style.display = "block";
        ok.textContent = "Cleared.";
        setTimeout(() => { ok.style.display = "none"; ok.textContent = "Saved."; }, 1200);
      });
    })();
  </script>
</body>
</html>
