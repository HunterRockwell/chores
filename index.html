<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Forced Labor – Chore Chart</title>

<!-- PWA / manifest -->
<link rel="manifest" href="manifest.json" />

<!-- iPhone / iPad Home Screen Icon -->
<link rel="apple-touch-icon" href="apple-touch-icon.png" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="Forced Labor" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="theme-color" content="#000000" />

<style>
:root {
  --bg: #111111;
  --card-bg: #181818;
  --border: #333333;
  --text: #f0f0f0;

  --emmitt: #2684ff;
  --turner: #3fbf6b;
  --miles: #c852ff;
  --stewart: #e5a72b;
}

* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", Helvetica, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  max-width: 960px;
  margin-left: auto;
  margin-right: auto;
}

h1 {
  text-align: center;
  font-size: 28px;
  margin: 10px 0 24px;
}

h2 {
  font-size: 18px;
  margin: 0 0 12px;
}

.card {
  background: var(--card-bg);
  border-radius: 14px;
  border: 1px solid var(--border);
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 18px 35px rgba(0,0,0,0.35);
}

.label-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.label-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 14px;
  background: #262626;
  border: 1px solid #3a3a3a;
  cursor: pointer;
  user-select: none;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.label-pill.active {
  background: var(--current-color, #f0b429);
  color: #000000;
  border-color: transparent;
  font-weight: 600;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
  font-size: 13px;
}

th, td {
  border: 1px solid #262626;
  padding: 8px 6px;
  text-align: center;
}

th {
  background: #1f1f1f;
  font-weight: 600;
}

td:first-child {
  text-align: left;
}

.boy-cell {
  transition: background-color 0.18s ease, color 0.18s ease, opacity 0.18s ease;
}

.boy-cell.dim {
  opacity: 0.25;
}

.boy-cell.highlight {
  font-weight: 600;
}

@media (max-width: 640px) {
  body {
    padding: 12px;
  }

  h1 {
    font-size: 22px;
  }

  .card {
    padding: 14px;
  }

  table {
    font-size: 11px;
  }

  th, td {
    padding: 6px 4px;
  }
}
</style>
</head>
<body>

<h1>Forced Labor Chore Chart</h1>

<div class="card">
  <h2>Select Worker</h2>
  <div class="label-row" id="boys"></div>
</div>

<div class="card">
  <h2>Daily Chores</h2>
  <p style="margin:0 0 6px;font-size:13px;color:#bbbbbb;">
  </p>
  <div id="daily"></div>
</div>

<div class="card">
  <h2>Weekly Chores</h2>
  <p style="margin:0 0 6px;font-size:13px;color:#bbbbbb;">
  </p>
  <div id="weekly"></div>
</div>

<script>
// Color map for each boy (CSS custom properties)
const boyColorVars = {
  Emmitt: "--emmitt",
  Turner: "--turner",
  Miles: "--miles",
  Stewart: "--stewart"
};

const days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

// ---- DAILY SCHEDULE ----
const dailyChores = [
  "Kitchen, Dishes, Dining",
  "Dogs (Food, Water, Porch)",
  "Trash, Grill",
  "Driveway, Deck, Denali"
];

const dailySchedule = [
  // Kitchen
  { Sun: "Turner", Mon: "Miles",   Tue: "Stewart", Wed: "Emmitt", Thu: "Miles",   Fri: "Stewart", Sat: "Emmitt" },
  // Dogs
  { Sun: "Miles",  Mon: "Stewart", Tue: "Emmitt",  Wed: "Turner", Thu: "Stewart", Fri: "Emmitt",  Sat: "Turner" },
  // Trash
  { Sun: "Stewart",Mon: "Emmitt",  Tue: "Turner",  Wed: "Miles",  Thu: "Emmitt",  Fri: "Turner",  Sat: "Miles" },
  // Driveway, deck, Mom’s car
  { Sun: "Emmitt", Mon: "Turner",  Tue: "Miles",   Wed: "Stewart",Thu: "Turner",  Fri: "Miles",   Sat: "Stewart" }
];

// ---- WEEKLY SCHEDULE ----
const weeklyWeeks = ["Week 1", "Week 2", "Week 3", "Week 4"];

const weeklyChores = [
  "Floors, Family, Living, Upstairs",
  "Pool",
  "Bathrooms",
  "Towels (Wash Fold Place)"
];

// Latin-square style rotation: each boy gets each chore once over 4 weeks
const weeklySchedule = [
  // Family, living, hall, upstairs and floors
  { "Week 1": "Miles",   "Week 2": "Stewart", "Week 3": "Turner",  "Week 4": "Emmitt" },
  // Pool
  { "Week 1": "Emmitt",  "Week 2": "Miles",   "Week 3": "Stewart", "Week 4": "Turner" },
  // Bathrooms
  { "Week 1": "Turner",  "Week 2": "Emmitt",  "Week 3": "Miles",   "Week 4": "Stewart" },
  // Towels (wash, fold, put away)
  { "Week 1": "Stewart", "Week 2": "Turner",  "Week 3": "Emmitt",  "Week 4": "Miles" }
];

// ---- BUILD BOY PILLS ----
const boyRow = document.getElementById("boys");

function makePill(label, boyName = null) {
  const pill = document.createElement("div");
  pill.className = "label-pill";
  pill.textContent = label;
  pill.dataset.boy = boyName ? boyName : "All";
  pill.addEventListener("click", () => {
    setActiveBoy(boyName);
  });
  boyRow.appendChild(pill);
}

makePill("All", null);
["Emmitt","Turner","Miles","Stewart"].forEach(name => makePill(name, name));

// ---- TABLE BUILDERS ----
function buildDailyTable() {
  let html = "<table><tr><th>Chore</th>";
  days.forEach(d => html += `<th>${d}</th>`);
  html += "</tr>";

  dailyChores.forEach((chore, i) => {
    const rowSched = dailySchedule[i];
    html += `<tr><td>${chore}</td>`;
    days.forEach(d => {
      const boy = rowSched[d];
      html += `<td class="boy-cell" data-boy="${boy}">${boy}</td>`;
    });
    html += "</tr>";
  });

  html += "</table>";
  document.getElementById("daily").innerHTML = html;
}

function buildWeeklyTable() {
  let html = "<table><tr><th>Chore</th>";
  weeklyWeeks.forEach(w => html += `<th>${w}</th>`);
  html += "</tr>";

  weeklyChores.forEach((chore, i) => {
    const rowSched = weeklySchedule[i];
    html += `<tr><td>${chore}</td>`;
    weeklyWeeks.forEach(w => {
      const boy = rowSched[w];
      html += `<td class="boy-cell" data-boy="${boy}">${boy}</td>`;
    });
    html += "</tr>";
  });

  html += "</table>";
  document.getElementById("weekly").innerHTML = html;
}

buildDailyTable();
buildWeeklyTable();

// ---- HIGHLIGHT LOGIC ----
function cssVarValue(varName) {
  return getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
}

function setActiveBoy(boyName) {
  // Pill state
  document.querySelectorAll(".label-pill").forEach(pill => {
    const pillBoy = pill.dataset.boy;
    const isAll = pillBoy === "All";
    const isActive =
      (boyName === null && isAll) ||
      (boyName !== null && pillBoy === boyName);

    pill.classList.toggle("active", isActive);
    if (boyName && pillBoy === boyName) {
      const color = cssVarValue(boyColorVars[boyName]);
      pill.style.setProperty("--current-color", color);
    }
  });

  // Cell state
  const cells = document.querySelectorAll(".boy-cell");
  cells.forEach(cell => {
    cell.classList.remove("dim","highlight");
    cell.style.backgroundColor = "";
    cell.style.color = "";

    if (!boyName) {
      return; // All = reset
    }

    if (cell.dataset.boy === boyName) {
      const color = cssVarValue(boyColorVars[boyName]);
      cell.classList.add("highlight");
      cell.style.backgroundColor = color;
      cell.style.color = "#000000";
    } else {
      cell.classList.add("dim");
    }
  });
}

// Default: All
setActiveBoy(null);
</script>

</body>
</html>
