<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Settings</title>
  <style>
    :root{
      --bg:#f5f5f7;
      --card:#ffffff;
      --text:#111;
      --sub:#6b6b6f;
      --link:#007aff;
      --radius:18px;
      --shadow:0 14px 30px rgba(0,0,0,.06);
      --divider:rgba(0,0,0,.08);
    }
    body{
      margin:0;
      background:var(--bg);
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif;
      -webkit-font-smoothing:antialiased;
      color:var(--text);
    }
    .wrap{max-width:960px;margin:0 auto;padding:1.25rem 1.5rem 2.5rem;}
    .top{
      display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;
      max-width:640px;
    }
    h1{margin:0;font-size:2.05rem;font-weight:750;letter-spacing:-.02em;}
    .back{margin-top:.35rem;font-weight:650;color:var(--link);text-decoration:none;font-size:1rem;}
    .back:active{opacity:.7;}
    .card{
      max-width:640px;margin-top:1rem;background:var(--card);border-radius:var(--radius);
      box-shadow:var(--shadow);overflow:hidden;
    }
    .row{
      display:flex;align-items:center;justify-content:space-between;gap:1rem;
      padding:1rem 1.05rem;border-bottom:1px solid var(--divider);
      text-decoration:none;color:inherit;
    }
    .row:last-child{border-bottom:none;}
    .left .title{font-weight:750;margin:0 0 .15rem;font-size:1.02rem;}
    .left .desc{margin:0;color:var(--sub);font-size:.95rem;}
    .chev{color:rgba(0,0,0,.35);font-size:1.2rem;line-height:1;}
    .disabled{opacity:.45;cursor:default;}
    .pill{
      max-width:640px;margin-top:1rem;text-align:center;
      color:#0a84ff;font-weight:700;font-size:.95rem;
      display:none;
    }
    @media (max-width:600px){
      .wrap{padding:1.1rem 1.2rem 2.1rem;}
      h1{font-size:1.9rem;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1 id="settingsTitle">Settings</h1>
      </div>
      <a class="back" href="index.html">Back</a>
    </div>

    <div class="card" id="menuCard">
      <a class="row" href="theme.html">
        <div class="left">
          <p class="title">Display &amp; Theme</p>
          <p class="desc">Pick a look for the chore chart</p>
        </div>
        <div class="chev">›</div>
      </a>

      <!-- Admin Tools (Dad only) - inserted by JS when enabled -->

      <div class="row disabled" aria-disabled="true">
        <div class="left">
          <p class="title">Coming soon</p>
          <p class="desc">More settings will live here later</p>
        </div>
        <div class="chev">›</div>
      </div>
    </div>

    <div id="adminEnabledPill" class="pill">Admin enabled on this device</div>
  </div>

  <script>
    (function(){
      // Apply theme (so Settings matches the app)
      const theme = localStorage.getItem("theme") || "classic";
      document.documentElement.setAttribute("data-theme", theme);

      // Hidden admin enable (no tip text on screen)
      const ADMIN_KEY = "admin_enabled";
      const title = document.getElementById("settingsTitle");
      let taps = 0, timer = null;

      title.addEventListener("click", () => {
        taps++;
        clearTimeout(timer);
        timer = setTimeout(() => (taps = 0), 1200);

        if (taps >= 7) {
          localStorage.setItem(ADMIN_KEY, "1");
          taps = 0;
          refreshAdminUI();
        }
      });

      function refreshAdminUI(){
        const enabled = localStorage.getItem(ADMIN_KEY) === "1";
        const pill = document.getElementById("adminEnabledPill");
        const card = document.getElementById("menuCard");

        pill.style.display = enabled ? "block" : "none";

        // Add Admin Tools row if enabled and not already there
        if (enabled && !document.getElementById("adminToolsRow")) {
          const a = document.createElement("a");
          a.className = "row";
          a.id = "adminToolsRow";
          a.href = "admin.html";
          a.innerHTML = `
            <div class="left">
              <p class="title">Admin Tools</p>
              <p class="desc">Regen settings for daily messages</p>
            </div>
            <div class="chev">›</div>
          `;
          // insert after Display & Theme
          card.insertBefore(a, card.children[1]);
        }
      }

      refreshAdminUI();
    })();
  </script>
</body>
</html>
